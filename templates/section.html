{% extends "base.html" %}
{% import "macros/toc.html" as toc_macros %}

{% block main_content %}
<div class="body">

    {# --- FLOATING TOC WIDGET --- #}
    {% if section.toc %}
    <aside class="toc-floating-widget">
        <div class="toc-header">
            <span class="toc-icon">Îž</span>
            <span class="toc-title">SECTOR_MAP</span>
        </div>
        <nav class="toc-tree">
            {{ toc_macros::tree(toc=section.toc) }}
        </nav>
    </aside>
    {% endif %}

    <div class="terminal-window">
        <div class="window-bar">
            <div class="window-controls">
                <span class="control close"></span>
                <span class="control minimize"></span>
                <span class="control maximize"></span>
            </div>
            <span class="window-title">{{ section.path | trim_start_matches(pat="/") }}</span>
        </div>

        <div class="window-content">
            
            <div class="cmd-line">
                <span class="cmd-prompt">&gt;</span>
                <span class="cmd">cat</span>
                <span class="args">README.md</span>
            </div>
            
            <div class="terminal-intro">
                {{ section.content | safe }}
            </div>

            <div class="cmd-line" style="margin-top: 2rem; margin-bottom: 1rem;">
                <span class="cmd-prompt">&gt;</span>
                <span class="cmd">ls</span>
                <span class="args">-lh --sort=date</span>
            </div>

            <div class="file-list-container">
                <table class="file-list">
                    <thead>
                        <tr>
                            <th>PERMISSIONS</th>
                            <th>SIZE</th>
                            <th>DATE</th>
                            <th>NAME</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="parent-dir">
                            <td class="perms">drwxr-xr-x</td>
                            <td class="size">-</td>
                            <td class="date">-</td>
                            <td class="name"><a href="../">.. (Parent Directory)</a></td>
                        </tr>

                        {% for page in section.pages %}
                        <tr class="file-row">
                            <td class="perms">-rw-r--r--</td>
                            <td class="size">{{ page.content | length }}b</td>
                            <td class="date"><time>{{ page.date | date(format="%Y-%m-%d") }}</time></td>
                            <td class="name">
                                <a href="{{ page.permalink }}">{{ page.title }}</a>
                                {% if page.extra %}
                                    {% if page.extra.status %}
                                        {% if page.extra.status == "seedling" %}
                                            <span class="badge-seedling">[WIP]</span>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="cmd-line" style="margin-top: 2rem; opacity: 0.5;">
                 <span class="cmd-prompt">&gt;</span>
                 <span class="cursor">_</span>
            </div>

        </div>
    </div>
</div>
{% endblock main_content %}