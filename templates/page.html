{% extends "base.html" %}
{% import "macros/toc.html" as toc_macros %}
{% import "macros/ui.html" as ui %}
{% import "macros/meta.html" as meta %}


{% block main_content %}
<div class="body">
    
    {# --- FLOATING TOC WIDGET (Only visible on wide screens) --- #}
    {% if page.toc %}
    <aside class="toc-floating-widget">
        <div class="toc-header">
            <span class="toc-icon">Îž</span>
            <span class="toc-title">DOCUMENT_MAP</span>
        </div>
        <nav class="toc-tree">
            {{ toc_macros::tree(toc=page.toc) }}
        </nav>
        <div class="toc-progress-bar"></div>
    </aside>
    {% endif %}

    <div class="terminal-window">
        
        {{ ui::window_bar(path=page.components) }}

        <div class="window-content">
            {{ ui::cmd(args="./" ~ page.slug ~ ".md", margin_top="0", opacity=0.3) }}

            {# RESTORED: Simple centered article layout #}
            <article class="terminal-article">
                {{ meta::header(page=page) }}
                
                <div class="article-body">
                    {{ page.content | safe }}
                </div>
            </article>

            <div class="content-footer">
                {% include "partials/backlinks.html" %}
                {{ meta::tags(taxonomies=page.taxonomies) }}
            </div>
            
            {{ ui::cmd(cmd=false, args=false, cursor=true, margin_top="4rem", opacity=0.5) }}
        </div>
    </div>
</div>
{% endblock main_content %}